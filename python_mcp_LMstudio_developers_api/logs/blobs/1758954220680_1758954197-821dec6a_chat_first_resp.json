{
  "id": "chatcmpl-vdw15ervfqr0syjr9x0981",
  "object": "chat.completion",
  "created": 1758954197,
  "model": "qwen.qwen3-coder-30b-a3b-instruct",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "I'll create a more visually appealing version of the USDA organizational chart with better styling, colors, and layout improvements.\n\n```python\nimport json\nfrom graphviz import Graph\n\n# JSON data provided by user\njson_data = {\n    \"directed_graph\": {\n        \"nodes\": [\n            {\"id\": \"USDA\", \"label\": \"United States Department of Agriculture\"},\n            {\"id\": \"AMS\", \"label\": \"Agricultural Marketing Service\"},\n            {\"id\": \"FNS\", \"label\": \"Food and Nutrition Service\"},\n            {\"id\": \"APHIS\", \"label\": \"Animal and Plant Health Inspection Service\"},\n            {\"id\": \"FSIS\", \"label\": \"Food Safety and Inspection Service\"},\n            {\"id\": \"ARS\", \"label\": \"Agricultural Research Service\"},\n            {\"id\": \"NASS\", \"label\": \"National Agricultural Statistics Service\"},\n            {\"id\": \"FAS\", \"label\": \"Foreign Agricultural Service\"},\n            {\"id\": \"RDA\", \"label\": \"Rural Development Administration\"},\n            {\"id\": \"FSA\", \"label\": \"Farm Service Agency\"},\n            {\"id\": \"NRCS\", \"label\": \"Natural Resources Conservation Service\"},\n            {\"id\": \"CCS\", \"label\": \"Commodity Credit Corporation\"},\n            {\"id\": \"GIPSA\", \"label\": \"Grain Inspection, Packers and Stockyards Administration\"},\n            {\"id\": \"RUS\", \"label\": \"Rural Utilities Service\"},\n            {\"id\": \"OS\", \"label\": \"Office of the Secretary\"},\n            {\"id\": \"OCE\", \"label\": \"Office of the Chief Economist\"}\n        ],\n        \"edges\": [\n            {\"source\": \"USDA\", \"target\": \"AMS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"FNS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"APHIS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"FSIS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"ARS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"NASS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"FAS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"RDA\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"FSA\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"NRCS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"CCS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"GIPSA\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"RUS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"OS\", \"relationship\": \"operates\"},\n            {\"source\": \"USDA\", \"target\": \"OCE\", \"relationship\": \"operates\"}\n        ]\n    }\n}\n\n# Create a directed graph with enhanced styling\ndot = Graph(comment='USDA Organization Structure')\ndot.attr(rankdir='LR')  # Left to right layout\ndot.attr(bgcolor='white')\ndot.attr(fontsize='12')\n\n# Define styles for different node types\ndot.attr('node', style='filled', fillcolor='lightblue', fontname='Arial', fontsize='10')\ndot.attr('edge', fontname='Arial', fontsize='9', color='darkblue')\n\n# Add nodes with enhanced styling\nfor node in json_data['directed_graph']['nodes']:\n    if node['id'] == 'USDA':\n        # Make USDA more prominent\n        dot.node(node['id'], node['label'], fillcolor='lightcoral', style='filled,rounded')\n    else:\n        # Regular agency nodes\n        dot.node(node['id'], node['label'])\n\n# Add edges with enhanced styling\nfor edge in json_data['directed_graph']['edges']:\n    dot.edge(edge['source'], edge['target'], label=edge['relationship'], color='darkblue', \n             fontcolor='darkblue', arrowsize='0.8')\n\n# Set overall graph attributes for better appearance\ndot.attr(ranksep='1.2')  # Increase spacing between ranks\ndot.attr(nodesep='0.5')  # Increase spacing between nodes\n\n# Render the enhanced graph to PNG\ndot.render('usda_organization_enhanced', format='png', cleanup=True)\n\nprint(\"Enhanced Graphviz visualization created successfully!\")\n```\n",
        "tool_calls": [
          {
            "type": "function",
            "id": "109051258",
            "function": {
              "name": "python_sandbox_execute",
              "arguments": "{\"code\":\"import json\\nfrom graphviz import Graph\\n\\n# JSON data provided by user\\njson_data = {\\n    \\\"directed_graph\\\": {\\n        \\\"nodes\\\": [\\n            {\\\"id\\\": \\\"USDA\\\", \\\"label\\\": \\\"United States Department of Agriculture\\\"},\\n            {\\\"id\\\": \\\"AMS\\\", \\\"label\\\": \\\"Agricultural Marketing Service\\\"},\\n            {\\\"id\\\": \\\"FNS\\\", \\\"label\\\": \\\"Food and Nutrition Service\\\"},\\n            {\\\"id\\\": \\\"APHIS\\\", \\\"label\\\": \\\"Animal and Plant Health Inspection Service\\\"},\\n            {\\\"id\\\": \\\"FSIS\\\", \\\"label\\\": \\\"Food Safety and Inspection Service\\\"},\\n            {\\\"id\\\": \\\"ARS\\\", \\\"label\\\": \\\"Agricultural Research Service\\\"},\\n            {\\\"id\\\": \\\"NASS\\\", \\\"label\\\": \\\"National Agricultural Statistics Service\\\"},\\n            {\\\"id\\\": \\\"FAS\\\", \\\"label\\\": \\\"Foreign Agricultural Service\\\"},\\n            {\\\"id\\\": \\\"RDA\\\", \\\"label\\\": \\\"Rural Development Administration\\\"},\\n            {\\\"id\\\": \\\"FSA\\\", \\\"label\\\": \\\"Farm Service Agency\\\"},\\n            {\\\"id\\\": \\\"NRCS\\\", \\\"label\\\": \\\"Natural Resources Conservation Service\\\"},\\n            {\\\"id\\\": \\\"CCS\\\", \\\"label\\\": \\\"Commodity Credit Corporation\\\"},\\n            {\\\"id\\\": \\\"GIPSA\\\", \\\"label\\\": \\\"Grain Inspection, Packers and Stockyards Administration\\\"},\\n            {\\\"id\\\": \\\"RUS\\\", \\\"label\\\": \\\"Rural Utilities Service\\\"},\\n            {\\\"id\\\": \\\"OS\\\", \\\"label\\\": \\\"Office of the Secretary\\\"},\\n            {\\\"id\\\": \\\"OCE\\\", \\\"label\\\": \\\"Office of the Chief Economist\\\"}\\n        ],\\n        \\\"edges\\\": [\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"AMS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"FNS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"APHIS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"FSIS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"ARS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"NASS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"FAS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"RDA\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"FSA\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"NRCS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"CCS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"GIPSA\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"RUS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"OS\\\", \\\"relationship\\\": \\\"operates\\\"},\\n            {\\\"source\\\": \\\"USDA\\\", \\\"target\\\": \\\"OCE\\\", \\\"relationship\\\": \\\"operates\\\"}\\n        ]\\n    }\\n}\\n\\n# Create a directed graph with enhanced styling\\ndot = Graph(comment='USDA Organization Structure')\\ndot.attr(rankdir='LR')  # Left to right layout\\ndot.attr(bgcolor='white')\\ndot.attr(fontsize='12')\\n\\n# Define styles for different node types\\ndot.attr('node', style='filled', fillcolor='lightblue', fontname='Arial', fontsize='10')\\ndot.attr('edge', fontname='Arial', fontsize='9', color='darkblue')\\n\\n# Add nodes with enhanced styling\\nfor node in json_data['directed_graph']['nodes']:\\n    if node['id'] == 'USDA':\\n        # Make USDA more prominent\\n        dot.node(node['id'], node['label'], fillcolor='lightcoral', style='filled,rounded')\\n    else:\\n        # Regular agency nodes\\n        dot.node(node['id'], node['label'])\\n\\n# Add edges with enhanced styling\\nfor edge in json_data['directed_graph']['edges']:\\n    dot.edge(edge['source'], edge['target'], label=edge['relationship'], color='darkblue', \\n             fontcolor='darkblue', arrowsize='0.8')\\n\\n# Set overall graph attributes for better appearance\\ndot.attr(ranksep='1.2')  # Increase spacing between ranks\\ndot.attr(nodesep='0.5')  # Increase spacing between nodes\\n\\n# Render the enhanced graph to PNG\\ndot.render('usda_organization_enhanced', format='png', cleanup=True)\\n\\nprint(\\\"Enhanced Graphviz visualization created successfully!\\\")\"}"
            }
          }
        ]
      },
      "logprobs": null,
      "finish_reason": "tool_calls"
    }
  ],
  "usage": {
    "prompt_tokens": 2973,
    "completion_tokens": 1979,
    "total_tokens": 4952
  },
  "stats": {},
  "system_fingerprint": "qwen.qwen3-coder-30b-a3b-instruct"
}